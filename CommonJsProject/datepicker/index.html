<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8" />
    <script src="core/jquery-3.1.1.min.js"></script>
    <script src="core/datepicker.js" template="core/datepicker-template.html" css="core/datepicker-orange.css"></script>

    <script>
        $(function () {
            //$("#txt1").attr("date-val", "2017-03-16 13:05:15");
            //datepicker();

        });
        

        var date_val_regex = /(\d{2,4})([/-])?(\d{1,2})?(?:[/-])?(\d{1,2})?\s*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?/;
        function getDateFormatByVal(dateVal) {
            var dateResult = inputDateConvert(dateVal);
            var format = "";
            if (dateResult.hasYear) format += "yyyy";
            if (dateResult.hasMonth) format += dateResult.symbol + "MM";
            if (dateResult.hasDay) format += dateResult.symbol + "dd";
            if (dateResult.hasHour) format += " hh";
            if (dateResult.hasMinute) format += ":mm";
            if (dateResult.hasSecond) format += ":ss";
            return format;
        }
        function inputDateConvert(dateVal) {
            var result = date_val_regex.exec(dateVal);
            var year = new Date().getFullYear(),
                month = new Date().getMonth(),
                day = new Date().getDate(),
                hour = 0,
                minute = 0,
                second = 0;
            var hasYear = false,
                hasMonth = false,
                hasDay = false,
                hasHour = false,
                hasMinute = false,
                hasSecond = false,
                symbol = "";
            if (result[1]) {
                year = result[1]; hasYear = true;
            }
            if (result[2]) symbol = result[2];
            if (result[3]) {
                month = result[3] - 1; hasMonth = true;
            }
            if (result[4]) {
                day = result[4]; hasDay = true;
            }
            if (result[5]) {
                hour = result[5]; hasHour = true;
            }
            if (result[6]) {
                minute = result[6]; hasMinute = true;
            }
            if (result[7]) {
                second = result[7]; hasSecond = true;
            }
            return {
                date: new Date(year, month, day, hour, minute, second),
                hasYear: hasYear,
                hasMonth: hasMonth,
                hasDay: hasDay,
                hasHour: hasHour,
                hasMinute: hasMinute,
                hasSecond: hasSecond,
                symbol: symbol
            }
        }
        console.log(getDateFormatByVal("2015/01/06 12:22:55"));
    </script>
    <style>
        .datepicker {
            background: url(../datepicker/date.png) no-repeat;
            background-position: right;
            padding-right: 0;
            padding: 4px 8px;
            border: 1px solid #ccc;
            border-radius: 2px;
            color: #333;
            outline: none;
        }

            .datepicker:focus {
                border-color: #51A7E8;
                background-color: #fff;
                box-shadow: 0 0 5px rgba(103, 166, 217, 0.5);
            }
    </style>
</head>
<body>
    <input type="text" name="txt" id="txt1" class="datepicker" date-val="2017/07/16 12:00:05"/>
    <input type="text" name="txt" id="txt2" class="datepicker" date-val="2017-07-06" />
    <input type="text" name="txt" id="txt3" class="datepicker" date-val="2015-05-06 12:00:00" />
    <input type="text" name="txt1" id="txt4" class="datepicker" date-val="2015-02-06 12:01:03" date-lang="en-us" date-show-format="dd Month yyyy hh:mm:ss" date-start="2000-01-01 00:00:00" date-end="2049-12-31 00:00:00" />
    <br />
    <br />
    <input type="text" name="txt" id="txt5" class="datepicker" />
</body>
</html>
